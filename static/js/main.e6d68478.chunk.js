(this["webpackJsonpbattleship-app"]=this["webpackJsonpbattleship-app"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(6),i=a.n(c),s=(a(12),a(13),a(1)),o=a(2),l=a(4),u=a(3),p=function e(t){var a=this;Object(s.a)(this,e),this.hit=function(e){a.hits[e-1]=1},this.isSunk=function(){return!!a.hits.every((function(e){return 1===e}))},this.length=t,this.hits=Array(t).fill(0)},h=function(){function e(){var t=this;Object(s.a)(this,e),this.placeShip=function(e,a,r){var n=new p(e),c=a[0]-1,i=a[1]-1;if(t.isOffBoard(r,c,i,e)||t.isOccupied(r,c,i,e))return!1;var s=t.ships.length+1;t.ships.push({id:s,ship:n,position:[]});for(var o=0;o<n.length;o++)"horizontal"===r?(t.grid[c+o][i]=s,t.ships[s-1].position.push("".concat(c+o,", ").concat(i))):(t.grid[c][i+o]=s,t.ships[s-1].position.push("".concat(c,", ").concat(i+o)))},this.autoplaceShips=function(){for(var e=[2,3,3,4,5],a=4;t.ships.length<5;){for(var r=t.getRandCoord(),n=t.getRandDirection(),c=t.placeShip(e[a],r,n);!1===c;)r=t.getRandCoord(),n=t.getRandDirection(),c=t.placeShip(e[a],r,n);a--}},this.resetShips=function(){t.ships=[],t.grid=[];for(var e=0;e<10;e++)t.grid[e]=Array(10).fill(0)},this.receiveAttack=function(e){var a=e[0]-1,r=e[1]-1;if(t.grid[a][r]>0){var n=t.grid[a][r],c=t.ships[n-1].position.indexOf("".concat(a,", ").concat(r));return t.ships[n-1].ship.hit(c+1),t.grid[a][r]="X",n}return t.grid[a][r]="O",!1},this.areAllSunk=function(){return!!t.ships.every((function(e){return!0===e.ship.isSunk()}))},this.grid=[];for(var a=0;a<10;a++)this.grid[a]=Array(10).fill(0);this.ships=[]}return Object(o.a)(e,[{key:"isOffBoard",value:function(e,t,a,r){return!("horizontal"===e&&t+r-1<10||"vertical"===e&&a+r-1<10)}},{key:"isOccupied",value:function(e,t,a,r){for(var n=0;n<r;n++)if("horizontal"===e){if(0!==this.grid[t+n][a])return!0}else if(0!==this.grid[t][a+n])return!0;return!1}},{key:"getRandCoord",value:function(){return[Math.floor(10*Math.random())+1,Math.floor(10*Math.random())+1]}},{key:"getRandDirection",value:function(){return 0===Math.floor(2*Math.random())?"horizontal":"vertical"}}]),e}(),m=function(){function e(t){var a=this;Object(s.a)(this,e),this.attack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.getRandCoord();if("computer"===a.name&&!a.isLegal(e))return!1;a.successfulAttack&&a.getAdjacentCoords(),a.attackQueue.length>0&&(e=a.attackQueue[0],a.attackQueue.shift()),a.attacks.push("".concat(e[0]-1,", ").concat(e[1]-1));var t=a.enemy.board.receiveAttack(e);"computer"===a.name&&t?(a.successfulAttack=e,a.attackedShip=a.enemy.board.ships[t-1].ship):a.successfulAttack=null,a.attackedShip&&a.attackedShip.isSunk()&&(a.successfulAttack=null,a.attackQueue=[],a.attackedShip=null)},this.name=t,this.enemy="",this.board=new h,this.attacks=[],this.successfulAttack=null,this.attackQueue=[],this.attackedShip=null}return Object(o.a)(e,[{key:"isLegal",value:function(e){return!this.attacks.find((function(t){return t==="".concat(e[0]-1,", ").concat(e[1]-1)}))}},{key:"getRandCoord",value:function(){return[Math.floor(10*Math.random())+1,Math.floor(10*Math.random())+1]}},{key:"getAdjacentCoords",value:function(){for(var e=[[-1,0],[0,1],[1,0],[0,-1]],t=0;t<4;t++){var a=this.successfulAttack[0]+e[t][0],r=this.successfulAttack[1]+e[t][1];a>=1&&a<=10&&r>=1&&r<=10&&this.isLegal([a,r])&&this.attackQueue.push([a,r])}}}]),e}(),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).getClass=function(t){if("computer"===e.props.player.name)switch(t){case"X":return"cell hit";case"O":return"cell miss";default:return e.props.completed?"cell":"cell open"}switch(t){case 1:return"cell carrier";case 2:return"cell battleship";case 3:return"cell destroyer";case 4:return"cell submarine";case 5:return"cell patrol";case"X":return"cell hit";case"O":return"cell miss";default:return"cell"}},e.getText=function(e){switch(e){case"O":return n.a.createElement("i",{className:"fa fa-circle"});default:return""}},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.props.col.reverse().map((function(t,a){return n.a.createElement("div",{key:"".concat(e.props.colId).concat(10-a),className:e.getClass(t),onClick:e.props.getAttack.bind(e,"".concat(e.props.colId,",").concat(10-a))},e.getText(t))}))}}]),a}(r.Component),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.props.player.board.grid.map((function(t,a){return n.a.createElement("div",{key:"column"+a,className:"column"},n.a.createElement(d,{key:"col"+a,col:t,colId:a+1,player:e.props.player,getAttack:e.props.getAttack,completed:e.props.completed}))}))}}]),a}(r.Component),v=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return this.props.length.map((function(e,t){return n.a.createElement("div",{key:t,className:"block"})}))}}]),a}(r.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={lengths:[[0,0,0,0,0],[0,0,0,0],[0,0,0],[0,0,0],[0,0]],direction:"horizontal"},e.rotateShips=function(){var t="horizontal"===e.state.direction?"vertical":"horizontal";e.setState({direction:t})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"ships "+this.state.direction},this.state.lengths.map((function(t,a){return n.a.createElement("div",{className:"ship "+e.state.direction,key:"class"+a},n.a.createElement(v,{key:a,id:a,length:t}))}))),n.a.createElement("div",{className:"buttons"},n.a.createElement("button",{onClick:this.rotateShips,title:"Rotate Ships"},n.a.createElement("i",{className:"fa fa-repeat"})),n.a.createElement("button",{onClick:this.props.autoPlace,title:"Autoplace Ships"},n.a.createElement("i",{className:"fa fa-refresh"})),n.a.createElement("button",{onClick:this.props.clearBoard,title:"Remove All Ships"},n.a.createElement("i",{className:"fa fa-remove"}))))}}]),a}(r.Component),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={lengths:[[0,0,0,0,0],[0,0,0,0],[0,0,0],[0,0,0],[0,0]]},e.setClass=function(t){return e.props.computer.board.ships[t].ship.isSunk()?"ship horizontal sunk":"ship horizontal"},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"ships scoreboard"},n.a.createElement("h2",null,"Ships Sunk"),this.state.lengths.map((function(t,a){return n.a.createElement("div",{className:e.setClass(a),key:"class"+a},n.a.createElement(v,{key:a,id:a,length:t,direction:e.state.direction}))})))}}]),a}(r.Component),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;Object(s.a)(this,a),(r=t.call(this,e)).autoPlace=function(){var e=r.state.player;e.board.resetShips(),e.board.autoplaceShips(),r.setState({player:e})},r.clearBoard=function(){var e=r.state.player;e.board.resetShips(),r.setState({player:e})},r.getAttack=function(e){if(r.state.turn%2!==0&&!r.state.winner){var t=r.state.player;if(e=e.split(","),t.isLegal(e)){t.attack(e);var a=t.enemy;r.setState({player:t,computer:a}),r.isGameOver(),r.computerAttack()}}},r.noAttack=function(){},r.computerAttack=function(){var e=r.state.computer;if(!1===e.attack())r.computerAttack();else{var t=r.state.turn+2,a=e.enemy;r.setState({player:a,computer:e,turn:t})}r.isGameOver()},r.isGameOver=function(){var e=r.state.player,t=r.state.computer;if(e.board.areAllSunk())r.setState({winner:t.name,completed:!0});else{if(!t.board.areAllSunk())return!1;r.setState({winner:e.name,completed:!0})}r.declareWinner()},r.resetGame=function(){var e=new m("player"),t=new m("computer");e.enemy=t,t.enemy=e,e.board.autoplaceShips(),t.board.autoplaceShips(),r.setState({player:e,computer:t,turn:1,completed:!1,winner:null})},r.declareWinner=function(){return"computer"===r.state.winner?n.a.createElement("div",{className:"info"},n.a.createElement("h2",{className:"winner"},"Too bad, the computer won!"),n.a.createElement("button",{onClick:r.resetGame,title:"Play Again"},n.a.createElement("i",{className:"fa fa-refresh"}))):"player"===r.state.winner?n.a.createElement("div",{className:"info"},n.a.createElement("h2",{className:"winner"},"Congrats! You've won!"),n.a.createElement("button",{onClick:r.resetGame,title:"Play Again"},n.a.createElement("i",{className:"fa fa-refresh"}))):void 0};var c=new m("player"),i=new m("computer");return c.enemy=i,i.enemy=c,c.board.autoplaceShips(),i.board.autoplaceShips(),r.state={player:c,computer:i,turn:1,completed:!1,winner:null},r}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("h1",null,"Battleship"),this.declareWinner(),n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"ships-wrapper"},n.a.createElement(k,{autoPlace:this.autoPlace,clearBoard:this.clearBoard})),n.a.createElement("div",{className:"board-wrapper"},n.a.createElement("div",{className:"board"},n.a.createElement(f,{player:this.state.player,getAttack:this.noAttack,completed:this.state.completed})),n.a.createElement("div",{className:"board"},n.a.createElement(f,{player:this.state.computer,getAttack:this.getAttack,completed:this.state.completed}))),n.a.createElement("div",{className:"ships-wrapper"},n.a.createElement(y,{computer:this.state.computer}))))}}]),a}(r.Component);var g=function(){return n.a.createElement(b,null)};i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(g,null)),document.getElementById("root"))},7:function(e,t,a){e.exports=a(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.e6d68478.chunk.js.map